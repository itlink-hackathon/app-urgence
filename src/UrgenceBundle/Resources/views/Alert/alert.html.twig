{% extends 'UrgenceBundle::layout.html.twig' %}

{% block title %}Alerter les secours{% endblock %}

{% block content %}

        {{ form_start(form, {'attr' : {'class': 'form-horizontal'}}) }}
        <div class="col-md-5">

        <div class="form-group">
            {{ form_label(form.alertType, "Type d'alerte",{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.alertType, {'attr': {'class': 'form-control', 'placeholder':''}}) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.severity, 'Sévérité',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.severity, {'attr': {'class': 'form-control', 'placeholder':''}}) }}
            </div>
        </div>    
        
        <div class="form-group">
            {{ form_label(form.public_user.lastName, 'Nom de famille',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.public_user.lastName, {'attr': {'class': 'form-control', 'placeholder':'Entrez votre nom de famille'}}) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.public_user.firstName, 'Prénom',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.public_user.firstName, {'attr': {'class': 'form-control', 'placeholder':'Entrez votre prénom'}}) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.public_user.genre, 'Sexe',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.public_user.genre, {'attr': {'class': 'form-control', 'rows':'5'}}) }}
            </div>
        </div>    
            
        <div class="form-group">
            {{ form_label(form.public_user.age, 'Age',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.public_user.age, {'attr': {'class': 'form-control', 'rows':'5', 'placeholder':'Entrez votre âge'}}) }}
            </div>
        </div>    
            
        <div class="form-group">
            {{ form_label(form.public_user.phone, 'Téléphone',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.public_user.phone, {'attr': {'class': 'form-control', 'placeholder':'Entrez votre téléphone'}}) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.public_user.mail, 'E-mail',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.public_user.mail, {'attr': {'class': 'form-control', 'placeholder':'Entrez votre email'}}) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(form.info, 'Informations complémentaires',{'label_attr': {'class': 'col-sm-4 control-label'}}) }}
            <div class="col-sm-8">
                {{ form_widget(form.info, {'attr': {'class': 'form-control', 'placeholder':'Précisez votre situation', 'rows':'5'}}) }}
            </div>
        </div>

        {{ form_widget(form.longPos) }}
        {{ form_widget(form.latPos) }}     
    </div>

<div class="col-md-7">
        <div class="form-group">
            <div class="container-fluid rounded-border padding-10">
            <div class="row">
            <div class="col-xs-12 col-md-8">
                    <label class="control-label" for="position" style="padding-top: 0;">Ma position</label>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="radio" style="display: inline-block;">
                                <label>
                                    <input id="obtenir-position-radio" type="radio" name="position-group"> Position GPS
                                </label>
                            </div>
                            <button type="button" id="obtenir-position-btn" class="btn btn-default"><i class="fa fa-map-marker"></i> Utiliser ma position <strong>actuelle</strong></button>
                            <div>
                               <span id="geolocate-error-msg-container error-display"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="radio" style="display: inline-block;">
                                <label>
                                    <input id="map-position-btn" type="radio" name="position-group"> Indiquer une position sur la carte
                                </label>
                            </div>
                        </div>
                    </div>
            </div>
                <div class="col-xs-12 col-md-4">
                   <p id="adresse-container">ksqjdlqdjlqjdlsqj<br>lsqkdlqkdlsqk sldkslqkdslqkd<br>35000 Rennes</p>
                </div>
            </div>
            <div class="row">
                <div id="map-indiquer-position"></div>
            </div>
            </div>
        </div>
</div>

    {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary straight pull-right margin-bottom-20'}}) }}

    {{ form_rest(form) }}

    {{ form_end(form) }}

    </div>
</form>

<script type="text/javascript">
function initMap() {
    var map = mapModule.init('map-indiquer-position');
    alerterModule.init(map);
};
</script>
<script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBspTNgVFapTrsO_xYRY5Zzbx1nfDJPVXg&callback=initMap">
</script>

{% endblock %}